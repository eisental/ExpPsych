<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" dir="rtl">

    <head>

        <title>BART</title>

        <meta charset="utf-8" />

        <!-- these files are required for the BART to work    -->
        <script type="text/javascript" src="src/jquery-3.0.0.min.js"></script>	<!-- basic javascript library for dom manipulation -->
        <script type="text/javascript" src="src/jcanvas.min.js"></script>      	<!-- the canvas plugin -->
        <script type="text/javascript" src="src/jquery.bart.js"></script>              <!-- the main BART plugin -->
        <link rel="stylesheet" type="text/css" href="src/jquery.bart.css" />        <!-- additional styles for to make the BART look fancy -->

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

        <!-- additional scripts to run the demo on this page -->
        <script type="text/javascript">
            //<![CDATA[
            var SUBJID;
            
            // Helper for enterKey in inputs
            $.fn.enterKey = function (fnc) {
                return this.each(function () {
                    $(this).keypress(function (ev) {
                        var keycode = (ev.keyCode ? ev.keyCode : ev.which);
                        if (keycode == '13') {
                            fnc.call(this, ev);
                        }
                    })
                })
            }
            
            // initialize the BART after the page has loaded
            $(document).ready(function () {

                // Hide all relevant divs
                $("#second").hide();
                $("#third").hide();
                $("#fourth").hide();


                // Setup BART
                var bOpts = {
                    min_pump: 2, 
                    earnings: 0.25,
                    onstart: function(){ this.start_time= $.now(); },
                    onexplode: function(){ this.end_time = $.now(); },
                    oncashin: function(){ this.end_time = $.now(); }
                };
                // create a BART with default values using 10 balloons
                $("#bart").bart(
                        {b: [
                                {b: 1, o: $.extend({color: 'blue', popprob: 8 }, bOpts)},
                                {b: 0, o: $.extend({color: 'red', popprob: 128 }, bOpts)},
                                {b: 0, o: $.extend({color: 'yellow', popprob: 32}, bOpts)}
                            ],
                            s: {
                                txt_cashin: 'Coletar $$$',
                                txt_inflate: 'Inflar',
                                txt_next: 'Próximo',
                                txt_balloon_number: 'Balões: ',
                                txt_number_of_pumps: 'Número de assopros: ',
                                txt_current_earned: 'Ganhos: ',
                                txt_total_earned: 'Total acumulado: R$ ',
                                txt_prob_explosion: 'Probabilidade de explodir: ',
                                txt_pumps_used: 'Assopros utilizados: ',
                                showpopprob: false,
                                sounds: true,
                                onload: function () {
                                    this.start_time = $.now();
                                },
                                onend: function () {
                                    this.end_time = $.now();
                                    this.balloon = null;
                                    console.log(this);
                                    console.log(JSON.stringify(this));
                                    data = {bart: JSON.stringify(this), subjid: SUBJID};
                                    endBart(data);
                                    //$.post('save.php', data);
                                }
                            }
                        }
                );

                $("#cont1").click(function(){
                    $("#first").hide("slow", "swing");
                    $("#second").show();
                });

                $("#cont2").click(function(){
                    $("#second").hide("slow", "swing");
                    $("#third").show();
                });

                function endBart(data){
                    console.log(data);
                    $("#third").hide("slow", "swing");
                    $("#bartData").text(JSON.stringify(data));
                    $("#fourth").show();
                }
                
                // Getting SUBJID
                //SUBJID = prompt("SUBJID:", "");
                $('#subjid').text( SUBJID );
            });

            //]]>
        </script>

    </head>
    <body>
        <div style="width: 600px; margin:auto;">            
            <h1 style="text-align: center;">BART</h1>
            <!-- <h3 id="subjid">_____</h3> -->
            <!-- load BART here -->
            <!-- <div id="bart"></div> -->
            <br/><br/>
        </div>

        <div class = "container">
            <form>
            <div id="first">
                <div class="row"><h2>עד כמה אתה ליאור?</h2></div>

                <div class="row">
                    <div class="col-md-2">&nbsp;</div>
                    <div class="col-md-1"><input type="radio" name="q1" value="1"> 1 </div>
                    <div class="col-md-1"><input type="radio" name="q1" value="2"> 2 </div>
                    <div class="col-md-1"><input type="radio" name="q1" value="2"> 3 </div>
                    <div class="col-md-1"><input type="radio" name="q1" value="2"> 4 </div>
                    <div class="col-md-1"><input type="radio" name="q1" value="2"> 5 </div>
                    <div class="col-md-1"><input type="radio" name="q1" value="2"> 6 </div>
                    <div class="col-md-1"><input type="radio" name="q1" value="2"> 7 </div>
                </div>

                <div class="row"><h2>האם תמיד ידעת שאתה רוצה להיות ליאור?</h2></div>

                <div class="row">
                    <div class="col-md-2">&nbsp;</div>
                    <div class="col-md-1"><input type="radio" name="q2" value="1"> 1 </div>
                    <div class="col-md-1"><input type="radio" name="q2" value="2"> 2 </div>
                    <div class="col-md-1"><input type="radio" name="q2" value="2"> 3 </div>
                    <div class="col-md-1"><input type="radio" name="q2" value="2"> 4 </div>
                    <div class="col-md-1"><input type="radio" name="q2" value="2"> 5 </div>
                    <div class="col-md-1"><input type="radio" name="q2" value="2"> 6 </div>
                    <div class="col-md-1"><input type="radio" name="q2" value="2"> 7 </div>
                </div>

                <button type="button" id="cont1" class="btn btn-primary">המשך</button>
            </div>


            <div id="second">
                <div class="row"><h2>כתוב כל מיני מחשבות על המוות שלך</h2></div>
                <div class="row"><textarea rows="10" cols="100"></textarea></div>

                <button type="button" id="cont2" class="btn btn-primary">המשך</button>
            </div>

            <div id="third">
                <!-- load BART here -->
                <h3>הסברים על הבארט אם בא לנו</h3>
                <div id="bart"></div>
            </div>

            <div id="fourth">
                <h1>תודה רבה!</h1>
                <textarea id="bartData"></textarea>
                <input type="submit" value="סיום">
            </div>
            </form>
        </div>


        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    </body>

</html>
